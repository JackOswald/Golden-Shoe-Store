{"ast":null,"code":"import _toConsumableArray from\"E:\\\\Jack\\\\Documents\\\\Programming\\\\game-store\\\\Video-Game-Store\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _defineProperty from\"E:\\\\Jack\\\\Documents\\\\Programming\\\\game-store\\\\Video-Game-Store\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/defineProperty\";import _classCallCheck from\"E:\\\\Jack\\\\Documents\\\\Programming\\\\game-store\\\\Video-Game-Store\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\Jack\\\\Documents\\\\Programming\\\\game-store\\\\Video-Game-Store\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"E:\\\\Jack\\\\Documents\\\\Programming\\\\game-store\\\\Video-Game-Store\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"E:\\\\Jack\\\\Documents\\\\Programming\\\\game-store\\\\Video-Game-Store\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"E:\\\\Jack\\\\Documents\\\\Programming\\\\game-store\\\\Video-Game-Store\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable;});keys.push.apply(keys,symbols);}return keys;}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(source,true).forEach(function(key){_defineProperty(target,key,source[key]);});}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source));}else{ownKeys(source).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key));});}}return target;}import React,{Component}from\"react\";import{storeProducts,detailProduct}from\"./data\";// Creating a provider and consumer for the information\nvar ProductContext=React.createContext();var ProductProvider=/*#__PURE__*/function(_Component){_inherits(ProductProvider,_Component);function ProductProvider(){var _getPrototypeOf2;var _this;_classCallCheck(this,ProductProvider);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(ProductProvider)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={products:[],detailProduct:detailProduct,cart:[],modalOpen:false,modalProduct:detailProduct,cartSubTotal:0,cartVAT:0,cartTotal:0};_this.setProducts=function(){var tempProducts=[];storeProducts.forEach(function(item){var singleItem=_objectSpread({},item);tempProducts=[].concat(_toConsumableArray(tempProducts),[singleItem]);});_this.setState(function(){return{products:tempProducts};});};_this.getItem=function(id){var product=_this.state.products.find(function(item){return item.id===id;});return product;};_this.handleDetail=function(id){var product=_this.getItem(id);_this.setState(function(){return{detailProduct:product};});};_this.addToCart=function(id){var tempProducts=_toConsumableArray(_this.state.products);var index=tempProducts.indexOf(_this.getItem(id));var product=tempProducts[index];product.inCart=true;product.count=1;var price=product.price;product.total=price;_this.setState(function(){return{products:tempProducts,cart:[].concat(_toConsumableArray(_this.state.cart),[product]),detailProduct:_objectSpread({},product)};},function(){_this.addTotals();});};_this.openModal=function(id){var product=_this.getItem(id);_this.setState(function(){return{modalProduct:product,modalOpen:true};});};_this.closeModal=function(){_this.setState(function(){return{modalOpen:false};});};_this.increment=function(id){// Get cart values from the current state\nvar tempCart=_toConsumableArray(_this.state.cart);var incProduct=tempCart.find(function(item){return item.id===id;});// Get index of item to be incremented\nvar index=tempCart.indexOf(incProduct);var product=tempCart[index];// Add to the count and total\nproduct.count=product.count+1;product.total=product.count*product.price;_this.setState(function(){return{cart:_toConsumableArray(tempCart)};},_this.addTotals());};_this.decrement=function(id){// Get cart values from the current state\nvar tempCart=_toConsumableArray(_this.state.cart);var decProduct=tempCart.find(function(item){return item.id===id;});// Get index of item to be decremented\nvar index=tempCart.indexOf(decProduct);var product=tempCart[index];// Subtract from the count and total\nproduct.count=product.count-1;if(product.count===0){_this.removeItem(id);}else{product.total=product.count*product.price;_this.setState(function(){return{cart:_toConsumableArray(tempCart)};},_this.addTotals());}};_this.removeItem=function(id){// Get products from the current state\nvar tempProducts=_toConsumableArray(_this.state.products);// Get cart values from the current state\nvar tempCart=_toConsumableArray(_this.state.cart);tempCart=tempCart.filter(function(item){return item.id!==id;});var index=tempProducts.indexOf(_this.getItem(id));var removeProduct=tempProducts[index];removeProduct.inCart=false;removeProduct.count=0;removeProduct.total=0;_this.setState(function(){return{cart:_toConsumableArray(tempCart),product:_toConsumableArray(tempProducts)};},function(){_this.addTotals();});};_this.clearCart=function(id){_this.setState(function(){return{cart:[]};},function(){_this.setProducts();_this.addTotals();});};_this.getTotals=function(){// Retrieve the current sub total from current state\nvar subTotal=0;_this.state.cart.map(function(item){return subTotal+=item.total;});// Calculate VAT from sub total\nvar tempVAT=subTotal*0.2;var VAT=parseFloat(tempVAT.toFixed(2));// Add VAT and sub total together for total\nvar tempTotal=subTotal+VAT;var total=parseFloat(tempTotal.toFixed(2));return{subTotal:subTotal,VAT:VAT,total:total};};_this.addTotals=function(){var totals=_this.getTotals();_this.setState(function(){return{cartSubTotal:totals.subTotal,cartVAT:totals.VAT,cartTotal:totals.total};});};return _this;}_createClass(ProductProvider,[{key:\"componentDidMount\",value:function componentDidMount(){this.setProducts();}// Obtain copy of values from data.js\n},{key:\"render\",value:function render(){return React.createElement(ProductContext.Provider,{value:_objectSpread({},this.state,{handleDetail:this.handleDetail,addToCart:this.addToCart,openModal:this.openModal,closeModal:this.closeModal,increment:this.increment,decrement:this.decrement,removeItem:this.removeItem,clearCart:this.clearCart})},this.props.children);}}]);return ProductProvider;}(Component);var ProductConsumer=ProductContext.Consumer;export{ProductProvider,ProductConsumer};","map":{"version":3,"sources":["E:/Jack/Documents/Programming/game-store/Video-Game-Store/src/context.js"],"names":["React","Component","storeProducts","detailProduct","ProductContext","createContext","ProductProvider","state","products","cart","modalOpen","modalProduct","cartSubTotal","cartVAT","cartTotal","setProducts","tempProducts","forEach","item","singleItem","setState","getItem","id","product","find","handleDetail","addToCart","index","indexOf","inCart","count","price","total","addTotals","openModal","closeModal","increment","tempCart","incProduct","decrement","decProduct","removeItem","filter","removeProduct","clearCart","getTotals","subTotal","map","tempVAT","VAT","parseFloat","toFixed","tempTotal","totals","props","children","ProductConsumer","Consumer"],"mappings":"gzDAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,aAAT,CAAwBC,aAAxB,KAA6C,QAA7C,CAEA;AACA,GAAMC,CAAAA,cAAc,CAAGJ,KAAK,CAACK,aAAN,EAAvB,C,GAEMC,CAAAA,e,maACJC,K,CAAQ,CACNC,QAAQ,CAAE,EADJ,CAENL,aAAa,CAAEA,aAFT,CAGNM,IAAI,CAAE,EAHA,CAINC,SAAS,CAAE,KAJL,CAKNC,YAAY,CAAER,aALR,CAMNS,YAAY,CAAE,CANR,CAONC,OAAO,CAAE,CAPH,CAQNC,SAAS,CAAE,CARL,C,OAgBRC,W,CAAc,UAAM,CAClB,GAAIC,CAAAA,YAAY,CAAG,EAAnB,CACAd,aAAa,CAACe,OAAd,CAAsB,SAAAC,IAAI,CAAI,CAC5B,GAAMC,CAAAA,UAAU,kBAAQD,IAAR,CAAhB,CACAF,YAAY,8BAAOA,YAAP,GAAqBG,UAArB,EAAZ,CACD,CAHD,EAIA,MAAKC,QAAL,CAAc,UAAM,CAClB,MAAO,CAAEZ,QAAQ,CAAEQ,YAAZ,CAAP,CACD,CAFD,EAGD,C,OAGDK,O,CAAU,SAAAC,EAAE,CAAI,CACd,GAAMC,CAAAA,OAAO,CAAG,MAAKhB,KAAL,CAAWC,QAAX,CAAoBgB,IAApB,CAAyB,SAAAN,IAAI,QAAIA,CAAAA,IAAI,CAACI,EAAL,GAAYA,EAAhB,EAA7B,CAAhB,CACA,MAAOC,CAAAA,OAAP,CACD,C,OAGDE,Y,CAAe,SAAAH,EAAE,CAAI,CACnB,GAAMC,CAAAA,OAAO,CAAG,MAAKF,OAAL,CAAaC,EAAb,CAAhB,CACA,MAAKF,QAAL,CAAc,UAAM,CAClB,MAAO,CAAEjB,aAAa,CAAEoB,OAAjB,CAAP,CACD,CAFD,EAGD,C,OAGDG,S,CAAY,SAAAJ,EAAE,CAAI,CAChB,GAAIN,CAAAA,YAAY,oBAAO,MAAKT,KAAL,CAAWC,QAAlB,CAAhB,CACA,GAAMmB,CAAAA,KAAK,CAAGX,YAAY,CAACY,OAAb,CAAqB,MAAKP,OAAL,CAAaC,EAAb,CAArB,CAAd,CACA,GAAMC,CAAAA,OAAO,CAAGP,YAAY,CAACW,KAAD,CAA5B,CACAJ,OAAO,CAACM,MAAR,CAAiB,IAAjB,CACAN,OAAO,CAACO,KAAR,CAAgB,CAAhB,CACA,GAAMC,CAAAA,KAAK,CAAGR,OAAO,CAACQ,KAAtB,CACAR,OAAO,CAACS,KAAR,CAAgBD,KAAhB,CAEA,MAAKX,QAAL,CACE,UAAM,CACJ,MAAO,CACLZ,QAAQ,CAAEQ,YADL,CAELP,IAAI,8BAAM,MAAKF,KAAL,CAAWE,IAAjB,GAAuBc,OAAvB,EAFC,CAGLpB,aAAa,kBAAOoB,OAAP,CAHR,CAAP,CAKD,CAPH,CAQE,UAAM,CACJ,MAAKU,SAAL,GACD,CAVH,EAYD,C,OAGDC,S,CAAY,SAAAZ,EAAE,CAAI,CAChB,GAAMC,CAAAA,OAAO,CAAG,MAAKF,OAAL,CAAaC,EAAb,CAAhB,CACA,MAAKF,QAAL,CAAc,UAAM,CAClB,MAAO,CAAET,YAAY,CAAEY,OAAhB,CAAyBb,SAAS,CAAE,IAApC,CAAP,CACD,CAFD,EAGD,C,OAGDyB,U,CAAa,UAAM,CACjB,MAAKf,QAAL,CAAc,UAAM,CAClB,MAAO,CAAEV,SAAS,CAAE,KAAb,CAAP,CACD,CAFD,EAGD,C,OAGD0B,S,CAAY,SAAAd,EAAE,CAAI,CAChB;AACA,GAAIe,CAAAA,QAAQ,oBAAO,MAAK9B,KAAL,CAAWE,IAAlB,CAAZ,CACA,GAAM6B,CAAAA,UAAU,CAAGD,QAAQ,CAACb,IAAT,CAAc,SAAAN,IAAI,CAAI,CACvC,MAAOA,CAAAA,IAAI,CAACI,EAAL,GAAYA,EAAnB,CACD,CAFkB,CAAnB,CAIA;AACA,GAAMK,CAAAA,KAAK,CAAGU,QAAQ,CAACT,OAAT,CAAiBU,UAAjB,CAAd,CACA,GAAMf,CAAAA,OAAO,CAAGc,QAAQ,CAACV,KAAD,CAAxB,CAEA;AACAJ,OAAO,CAACO,KAAR,CAAgBP,OAAO,CAACO,KAAR,CAAgB,CAAhC,CACAP,OAAO,CAACS,KAAR,CAAgBT,OAAO,CAACO,KAAR,CAAgBP,OAAO,CAACQ,KAAxC,CAEA,MAAKX,QAAL,CAAc,UAAM,CAClB,MAAO,CACLX,IAAI,oBAAM4B,QAAN,CADC,CAAP,CAGD,CAJD,CAIG,MAAKJ,SAAL,EAJH,EAKD,C,OAGDM,S,CAAY,SAAAjB,EAAE,CAAI,CAChB;AACA,GAAIe,CAAAA,QAAQ,oBAAO,MAAK9B,KAAL,CAAWE,IAAlB,CAAZ,CACA,GAAM+B,CAAAA,UAAU,CAAGH,QAAQ,CAACb,IAAT,CAAc,SAAAN,IAAI,CAAI,CACvC,MAAOA,CAAAA,IAAI,CAACI,EAAL,GAAYA,EAAnB,CACD,CAFkB,CAAnB,CAIA;AACA,GAAMK,CAAAA,KAAK,CAAGU,QAAQ,CAACT,OAAT,CAAiBY,UAAjB,CAAd,CACA,GAAMjB,CAAAA,OAAO,CAAGc,QAAQ,CAACV,KAAD,CAAxB,CAEA;AACAJ,OAAO,CAACO,KAAR,CAAgBP,OAAO,CAACO,KAAR,CAAgB,CAAhC,CACA,GAAIP,OAAO,CAACO,KAAR,GAAkB,CAAtB,CAAyB,CACvB,MAAKW,UAAL,CAAgBnB,EAAhB,EACD,CAFD,IAEO,CACLC,OAAO,CAACS,KAAR,CAAgBT,OAAO,CAACO,KAAR,CAAgBP,OAAO,CAACQ,KAAxC,CAEA,MAAKX,QAAL,CAAc,UAAM,CAClB,MAAO,CACLX,IAAI,oBAAM4B,QAAN,CADC,CAAP,CAGD,CAJD,CAIG,MAAKJ,SAAL,EAJH,EAKD,CACF,C,OAGDQ,U,CAAa,SAAAnB,EAAE,CAAI,CACjB;AACA,GAAIN,CAAAA,YAAY,oBAAO,MAAKT,KAAL,CAAWC,QAAlB,CAAhB,CAEA;AACA,GAAI6B,CAAAA,QAAQ,oBAAO,MAAK9B,KAAL,CAAWE,IAAlB,CAAZ,CAEA4B,QAAQ,CAAGA,QAAQ,CAACK,MAAT,CAAgB,SAAAxB,IAAI,QAAIA,CAAAA,IAAI,CAACI,EAAL,GAAYA,EAAhB,EAApB,CAAX,CAEA,GAAMK,CAAAA,KAAK,CAAGX,YAAY,CAACY,OAAb,CAAqB,MAAKP,OAAL,CAAaC,EAAb,CAArB,CAAd,CACA,GAAIqB,CAAAA,aAAa,CAAG3B,YAAY,CAACW,KAAD,CAAhC,CAEAgB,aAAa,CAACd,MAAd,CAAuB,KAAvB,CACAc,aAAa,CAACb,KAAd,CAAsB,CAAtB,CACAa,aAAa,CAACX,KAAd,CAAsB,CAAtB,CAEA,MAAKZ,QAAL,CACE,UAAM,CACJ,MAAO,CACLX,IAAI,oBAAM4B,QAAN,CADC,CAELd,OAAO,oBAAMP,YAAN,CAFF,CAAP,CAID,CANH,CAOE,UAAM,CACJ,MAAKiB,SAAL,GACD,CATH,EAWD,C,OAGDW,S,CAAY,SAAAtB,EAAE,CAAI,CAChB,MAAKF,QAAL,CACE,UAAM,CACJ,MAAO,CAAEX,IAAI,CAAE,EAAR,CAAP,CACD,CAHH,CAIE,UAAM,CACJ,MAAKM,WAAL,GACA,MAAKkB,SAAL,GACD,CAPH,EASD,C,OAGDY,S,CAAY,UAAM,CAChB;AACA,GAAIC,CAAAA,QAAQ,CAAG,CAAf,CACA,MAAKvC,KAAL,CAAWE,IAAX,CAAgBsC,GAAhB,CAAoB,SAAA7B,IAAI,QAAK4B,CAAAA,QAAQ,EAAI5B,IAAI,CAACc,KAAtB,EAAxB,EAEA;AACA,GAAMgB,CAAAA,OAAO,CAAGF,QAAQ,CAAG,GAA3B,CACA,GAAMG,CAAAA,GAAG,CAAGC,UAAU,CAACF,OAAO,CAACG,OAAR,CAAgB,CAAhB,CAAD,CAAtB,CAEA;AACA,GAAMC,CAAAA,SAAS,CAAGN,QAAQ,CAAGG,GAA7B,CACA,GAAMjB,CAAAA,KAAK,CAAGkB,UAAU,CAACE,SAAS,CAACD,OAAV,CAAkB,CAAlB,CAAD,CAAxB,CAEA,MAAO,CACLL,QAAQ,CAARA,QADK,CAELG,GAAG,CAAHA,GAFK,CAGLjB,KAAK,CAALA,KAHK,CAAP,CAKD,C,OAGDC,S,CAAY,UAAM,CAChB,GAAMoB,CAAAA,MAAM,CAAG,MAAKR,SAAL,EAAf,CAEA,MAAKzB,QAAL,CAAc,UAAM,CAClB,MAAO,CACLR,YAAY,CAAEyC,MAAM,CAACP,QADhB,CAELjC,OAAO,CAAEwC,MAAM,CAACJ,GAFX,CAGLnC,SAAS,CAAEuC,MAAM,CAACrB,KAHb,CAAP,CAKD,CAND,EAOD,C,wGAlMmB,CAClB,KAAKjB,WAAL,GACD,CAED;uCAgMS,CACP,MACE,qBAAC,cAAD,CAAgB,QAAhB,EACE,KAAK,kBACA,KAAKR,KADL,EAEHkB,YAAY,CAAE,KAAKA,YAFhB,CAGHC,SAAS,CAAE,KAAKA,SAHb,CAIHQ,SAAS,CAAE,KAAKA,SAJb,CAKHC,UAAU,CAAE,KAAKA,UALd,CAMHC,SAAS,CAAE,KAAKA,SANb,CAOHG,SAAS,CAAE,KAAKA,SAPb,CAQHE,UAAU,CAAE,KAAKA,UARd,CASHG,SAAS,CAAE,KAAKA,SATb,EADP,EAaG,KAAKU,KAAL,CAAWC,QAbd,CADF,CAiBD,C,6BAlO2BtD,S,EAqO9B,GAAMuD,CAAAA,eAAe,CAAGpD,cAAc,CAACqD,QAAvC,CAEA,OAASnD,eAAT,CAA0BkD,eAA1B","sourcesContent":["import React, { Component } from \"react\";\r\nimport { storeProducts, detailProduct } from \"./data\";\r\n\r\n// Creating a provider and consumer for the information\r\nconst ProductContext = React.createContext();\r\n\r\nclass ProductProvider extends Component {\r\n  state = {\r\n    products: [],\r\n    detailProduct: detailProduct,\r\n    cart: [],\r\n    modalOpen: false,\r\n    modalProduct: detailProduct,\r\n    cartSubTotal: 0,\r\n    cartVAT: 0,\r\n    cartTotal: 0\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.setProducts();\r\n  }\r\n\r\n  // Obtain copy of values from data.js\r\n  setProducts = () => {\r\n    let tempProducts = [];\r\n    storeProducts.forEach(item => {\r\n      const singleItem = { ...item };\r\n      tempProducts = [...tempProducts, singleItem];\r\n    });\r\n    this.setState(() => {\r\n      return { products: tempProducts };\r\n    });\r\n  };\r\n\r\n  // Get the id values of an item\r\n  getItem = id => {\r\n    const product = this.state.products.find(item => item.id === id);\r\n    return product;\r\n  };\r\n\r\n  // Set the template product to our current product\r\n  handleDetail = id => {\r\n    const product = this.getItem(id);\r\n    this.setState(() => {\r\n      return { detailProduct: product };\r\n    });\r\n  };\r\n\r\n  // Add the specific object to cart using id\r\n  addToCart = id => {\r\n    let tempProducts = [...this.state.products];\r\n    const index = tempProducts.indexOf(this.getItem(id));\r\n    const product = tempProducts[index];\r\n    product.inCart = true;\r\n    product.count = 1;\r\n    const price = product.price;\r\n    product.total = price;\r\n\r\n    this.setState(\r\n      () => {\r\n        return {\r\n          products: tempProducts,\r\n          cart: [...this.state.cart, product],\r\n          detailProduct: { ...product }\r\n        };\r\n      },\r\n      () => {\r\n        this.addTotals();\r\n      }\r\n    );\r\n  };\r\n\r\n  // Open modal when clicked on image\r\n  openModal = id => {\r\n    const product = this.getItem(id);\r\n    this.setState(() => {\r\n      return { modalProduct: product, modalOpen: true };\r\n    });\r\n  };\r\n\r\n  // Close modal when clicked back or checkout\r\n  closeModal = () => {\r\n    this.setState(() => {\r\n      return { modalOpen: false };\r\n    });\r\n  };\r\n\r\n  // Add one to the selected item in cart\r\n  increment = id => {\r\n    // Get cart values from the current state\r\n    let tempCart = [...this.state.cart];\r\n    const incProduct = tempCart.find(item => {\r\n      return item.id === id;\r\n    });\r\n\r\n    // Get index of item to be incremented\r\n    const index = tempCart.indexOf(incProduct);\r\n    const product = tempCart[index];\r\n\r\n    // Add to the count and total\r\n    product.count = product.count + 1;\r\n    product.total = product.count * product.price;\r\n\r\n    this.setState(() => {\r\n      return {\r\n        cart: [...tempCart]\r\n      };\r\n    }, this.addTotals());\r\n  };\r\n\r\n  // Subtract one from the selected item in cart\r\n  decrement = id => {\r\n    // Get cart values from the current state\r\n    let tempCart = [...this.state.cart];\r\n    const decProduct = tempCart.find(item => {\r\n      return item.id === id;\r\n    });\r\n\r\n    // Get index of item to be decremented\r\n    const index = tempCart.indexOf(decProduct);\r\n    const product = tempCart[index];\r\n\r\n    // Subtract from the count and total\r\n    product.count = product.count - 1;\r\n    if (product.count === 0) {\r\n      this.removeItem(id);\r\n    } else {\r\n      product.total = product.count * product.price;\r\n\r\n      this.setState(() => {\r\n        return {\r\n          cart: [...tempCart]\r\n        };\r\n      }, this.addTotals());\r\n    }\r\n  };\r\n\r\n  // Remove a single item from cart\r\n  removeItem = id => {\r\n    // Get products from the current state\r\n    let tempProducts = [...this.state.products];\r\n\r\n    // Get cart values from the current state\r\n    let tempCart = [...this.state.cart];\r\n\r\n    tempCart = tempCart.filter(item => item.id !== id);\r\n\r\n    const index = tempProducts.indexOf(this.getItem(id));\r\n    let removeProduct = tempProducts[index];\r\n\r\n    removeProduct.inCart = false;\r\n    removeProduct.count = 0;\r\n    removeProduct.total = 0;\r\n\r\n    this.setState(\r\n      () => {\r\n        return {\r\n          cart: [...tempCart],\r\n          product: [...tempProducts]\r\n        };\r\n      },\r\n      () => {\r\n        this.addTotals();\r\n      }\r\n    );\r\n  };\r\n\r\n  // Clear the cart and get new copies of object data\r\n  clearCart = id => {\r\n    this.setState(\r\n      () => {\r\n        return { cart: [] };\r\n      },\r\n      () => {\r\n        this.setProducts();\r\n        this.addTotals();\r\n      }\r\n    );\r\n  };\r\n\r\n  // Retrieve and calculate totals from all items in cart\r\n  getTotals = () => {\r\n    // Retrieve the current sub total from current state\r\n    let subTotal = 0;\r\n    this.state.cart.map(item => (subTotal += item.total));\r\n\r\n    // Calculate VAT from sub total\r\n    const tempVAT = subTotal * 0.2;\r\n    const VAT = parseFloat(tempVAT.toFixed(2));\r\n\r\n    // Add VAT and sub total together for total\r\n    const tempTotal = subTotal + VAT;\r\n    const total = parseFloat(tempTotal.toFixed(2));\r\n\r\n    return {\r\n      subTotal,\r\n      VAT,\r\n      total\r\n    };\r\n  };\r\n\r\n  // Retrieve totals previously calculated and update the state\r\n  addTotals = () => {\r\n    const totals = this.getTotals();\r\n\r\n    this.setState(() => {\r\n      return {\r\n        cartSubTotal: totals.subTotal,\r\n        cartVAT: totals.VAT,\r\n        cartTotal: totals.total\r\n      };\r\n    });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <ProductContext.Provider\r\n        value={{\r\n          ...this.state,\r\n          handleDetail: this.handleDetail,\r\n          addToCart: this.addToCart,\r\n          openModal: this.openModal,\r\n          closeModal: this.closeModal,\r\n          increment: this.increment,\r\n          decrement: this.decrement,\r\n          removeItem: this.removeItem,\r\n          clearCart: this.clearCart\r\n        }}\r\n      >\r\n        {this.props.children}\r\n      </ProductContext.Provider>\r\n    );\r\n  }\r\n}\r\n\r\nconst ProductConsumer = ProductContext.Consumer;\r\n\r\nexport { ProductProvider, ProductConsumer };\r\n"]},"metadata":{},"sourceType":"module"}